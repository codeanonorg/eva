\documentclass[11pt,twoside,french]{article}
\usepackage{beraserif}
\usepackage{berasans}
\usepackage{graphicx}
\usepackage{beramono}
\usepackage{eulervm}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[a4paper]{geometry}
\geometry{verbose,lmargin=4cm,rmargin=3cm}
\usepackage{color}
\usepackage{babel}
\makeatletter
\addto\extrasfrench{%
   \providecommand{\og}{\leavevmode\flqq~}%
   \providecommand{\fg}{\ifdim\lastskip>\z@\unskip\fi~\frqq}%
}

\makeatother
\usepackage{refstyle}
\usepackage{algorithm2e}
\usepackage{microtype}
\usepackage[unicode=true,pdfusetitle,
 bookmarks=true,bookmarksnumbered=true,bookmarksopen=false,
 breaklinks=true,pdfborder={0 0 0},pdfborderstyle={},backref=section,colorlinks=true]
 {hyperref}
\hypersetup{
 pdfsubject={Un assembleur et VM pour les étudiants, par des étudiants},
 pdfkeywords={asm,assembleur,vm}}

\makeatletter
\newcommand{\noun}[1]{\textsc{#1}}


\begin{document}
\title{EVA}
\author{Association CodeAnon}

\maketitle
\clearpage{}

\section*{Remarque préliminaire}

Ce document est écris au présent. Il n'en reste pas moins une projection de ce que sera Eva au terme de son développement. Il faut donc le lire comme une description détaillée du projet final Eva et non comme une description de son état actuel.

\cleardoublepage

\tableofcontents
\cleardoublepage

\vfill

\section{Introduction}

Le langage assembleur constitue la première abstraction à la programmation
de circuits programmables. Aussi son apprentissage est une étape fondamentale pour l'étudiant curieux de comprendre le fonctionnement des ordinateurs. Mais d'autres applications nécessitent une bonne connaissance des langages d'assemblage. L'écriture des compilateurs par exemple repose assez largement sur une connaissance fine des différentes architectures existantes (ARM, elf, x86 ...) et des langages d'assemblage qui leurs sont associés. \\

Comment alors permettre aux étudiants désireux de s'initier à l'écriture de compilateur ou d'applications très bas niveau de réaliser leurs projets ? Face à l'étendue des architectures à cibler, à la compléxité de certaines d'entres elles, ce type de projet peut rapidement devenir compliqué. Bien sur, des alternatives existent déjà. On peut citer le fameux ouvrage Structure And interpretation of Computer Programs \cite{SICP} qui propose en dernier chapitre l'implémentation d'une machine abstraite programmable dans un langage d'assemblage simple. D'autres projets comme la machine virtuelle CHIP8 sont des sources intéressantes pour découvrir la programmation assembleur \cite{CHIP8}. Ces outils déjà utilisés dans le but de rendre accessible aux étudiants les thématiques dites de "bas niveaux" restent néanmoins très spécifiques et limitent grandement le champs des possibles. C'est à ce carrefour entre facilité d'apprentissage et possibilités offertes; ce delta entre outil pédagogique et problèmes en tailles réélles qu'essaye de s'intercaler le projet \noun{Eva}. \\

\vfill{}
\newpage{}

\section{Eva}

\noun{Eva} est une machine virtuelle développée par des étudiants pour les
étudiants. Simple et légère, elle offre un terrain d'expérimentation
particulièrement adapté à l'apprentissage de l'assembleur ou encore
à l'écriture de compilateurs. Son code source publique, clair et documenté
la rendent accessible et facilement modifiable. \noun{Eva} est programmable
dans un langage assembleur dédié facile d'accès et doté d'un jeu d'instructions
succinct mais complet. Par complet nous entendons informellement "suffisant pour permettre d'implanter une application incluant des entrées, des sorties et eventuellement des fonctions de réseaux ou d'affichage graphique". Nous reviendrons en détail sur ce point dans la suite du document.

\vfill{}

\section{Description technique}


TODO (\ref{fig:diagram1})


\begin{figure}[b]
  \centering
  \textbf{WARNING}: Changer le nom du graphe pour éviter qu'il soit ignoré par git
  \includegraphics[height=10cm, keepaspectratio]{diagram1_graph.pdf}
  \caption{Structure de la machine virtuelle \noun{Eva}}
  \label{fig:diagram1}
\end{figure}

\section{Éléments de conception}

La machine virtuelle doit être minimaliste pour être facilement implantable,
simple à programmer pour rester accessible aux étudiants désireux
d'apprendre, mais également suffisament performante pour supporter
le développement d'applications en vrai grandeur. \noun{Eva} étant
conçue sur la base du \og retour aux fondamentaux\fg , elle va à l'essentiel
et propose un jeu d'instructions à la fois concis et simple à prendre
en main sans fonctionnalités superflue. Nous avons à ces fins séléctionné
un sous-ensemble des instructions ARM \tabref{opcodes}.

\begin{table}[bp]
\begin{centering}
\begin{tabular}{|c|l|}
\hline
\textbf{Instruction} & \textbf{Description}\\
\hline
\hline
\textbf{ADD} & Addition\\
\hline
\textbf{ADC} & Addition avec retenue\\
\hline
\textbf{BIC} & RAZ de bit\\
\hline
\textbf{CMP} & Comparaison\\
\hline
\textbf{MOV} & Écriture de valeur dans le registre\\
\hline
\textbf{B} & \emph{Branch Jump}\\
\hline
\textbf{BL} & \emph{Branch Link}\\
\hline
\textbf{PUSH} & Empiler\\
\hline
\textbf{POP} & Dépiler\\
\hline
\textbf{SUB} & Soustration avec retenue\\
\hline
\end{tabular}
\par\end{centering}
\caption{Liste des op-codes de la machine virtuelle d'\noun{Eva}.}
\label{tab:opcodes}
\end{table}


\section{Implantation de la machine virtuelle}

Afin d'aider au développement du projet, \noun{Eva} va être implantée
en C (norme 99) et doit ne dépendre d'aucun code source autre que
la librairie standard. Une telle contrainte assure que l'implantation
soit élémentaire, le code source portable, et la compilation aisée.

Cette implantation minimale va de paire avec l'idéologie derrière
Eva : prioriser l'accessibilité et la fiabilité. De plus, l'aspect
sécurité est d'une grande importance pour le projet, où la correction
de code aura toujours priorité sur l'ajout de nouvelles fonctionnalités.

\section{Disponibilité du projet}

\noun{Eva} est un projet publique, dont le code et les binaires seront
accessibles en open-source, suivant une licence MIT. Cela veut dire
que n'importe quel utilisateur peut télécharger, lire et modifier
le code source. Le projet étant pédagogique, il va de soit que chaque
facette du projet soit publique et disponible au plus grand nombre.

\section{Projets connexes}

En plus du développement de la machine virtuelle, \noun{Eva} sera
également le socle de plusieurs projets dont divers compilateurs ciblant
EVA. Parmis ces compilateurs l'équipe d'EVA développera et maintiendra
un langage de programmation de haut niveau spécifique à EVA. Ce dernier
permetra de complémenter les possibilités offertes par le simple langage
assembleur supporté nativement par la platteforme.


\newpage{}

\begin{thebibliography}{XXXXXX}
\label{chap:bib}

\bibitem{SICP} Harold Abelson and Gerald Jay Sussman
\emph{Structure and Interpretation of Computer Programs} MIT, 1996

\bibitem{CHIP8} Joseph Weisbecker
\emph{CHIP-8 programming language and virtual machine} 1978

\end{thebibliography}

\end{document}
